<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{shared/adminlayout}"
>
  <body>
    <div layout:fragment="content">
      <main class="main">
        <!-- Top bar -->
        <div class="topbar">
          <div class="d-flex align-items-center gap-3">
            <div class="title text-uppercase">Room Management</div>
          </div>
          <div class="user">
            <i class="bi bi-bell"></i>
            <span>Admin</span>
            <div class="avatar">A</div>
          </div>
        </div>

        <!-- Main Content -->
        <div class="container-fluid py-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0 fw-bold">Rooms</h5>
            <a th:href="@{/room/create}" class="btn btn-primary">
              <i class="bi bi-plus-lg me-1"></i> Add New Room
            </a>
          </div>

          <div class="card">
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-hover align-middle mb-3">
                  <thead>
                    <tr>
                      <th>Room ID</th>
                      <th>Type Room</th>
                      <th>Type View</th>
                      <th>Beds</th>
                      <th>Price</th>
                      <th>Status</th>
                      <th class="text-end">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:each="room : ${roomList}">
                      <td class="fw-semibold" th:text="${room.roomId}"></td>
                      <td th:text="${room.roomType}"></td>
                      <td th:text="${room.viewType}"></td>
                      <td th:text="${room.numberOfBed}"></td>
                      <td
                        th:text="${#numbers.formatDecimal(room.price, 1, 'COMMA', 2, 'POINT')}"
                      ></td>
                      <td>
                        <span
                          class="badge status-badge"
                          th:class="${room.status == 'Available' ? 'bg-success' : 
                         (room.status == 'Occupied' ? 'bg-danger' : 'bg-warning text-dark')}"
                          th:text="${room.status}"
                        ></span>
                      </td>
                      <td class="text-end">
                        <a
                          th:href="@{'/room/edit/' + ${room.roomId}}"
                          class="btn btn-sm btn-secondary me-2"
                          >Edit</a
                        >
                        <a
                          th:href="@{'/room/delete/' + ${room.roomId}}"
                          class="btn btn-sm btn-danger"
                          th:onclick="'return confirm(\'Are you sure you want to delete room ' + ${room.roomId} + '?\')'"
                        >
                          Delete
                        </a>
                      </td>
                    </tr>

                    <!-- If no data -->
                    <tr th:if="${roomList.isEmpty()}">
                      <td colspan="7" class="text-center text-muted py-5">
                        No rooms found.
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <!-- Pagination -->
              <nav class="d-flex justify-content-center">
                <ul class="pagination justify-content-center mb-0">
                  <!-- Previous -->
                  <li
                    class="page-item"
                    th:classappend="${roomList.first} ? 'disabled'"
                  >
                    <a
                      class="page-link"
                      th:href="@{/room/list(page=${roomList.number - 1}, size=${roomList.size})}"
                    >
                      &laquo;
                    </a>
                  </li>

                  <!-- Page Numbers -->
                  <li
                    th:each="i : ${#numbers.sequence(0, roomList.totalPages - 1)}"
                    class="page-item"
                    th:classappend="${i == roomList.number} ? 'active'"
                  >
                    <a
                      class="page-link"
                      th:href="@{/room/list(page=${i}, size=${roomList.size})}"
                      th:text="${i + 1}"
                    ></a>
                  </li>

                  <!-- Next -->
                  <li
                    class="page-item"
                    th:classappend="${roomList.last} ? 'disabled'"
                  >
                    <a
                      class="page-link"
                      th:href="@{/room/list(page=${roomList.number + 1}, size=${roomList.size})}"
                    >
                      &raquo;
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
