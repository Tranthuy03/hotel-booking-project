<!DOCTYPE html>
<html
  lang="vi"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{shared/adminlayout}"
>
  <head>
    <meta charset="UTF-8" />
    <title>Edit Room</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <div layout:fragment="content">
      <div class="page-wrapper">
        <div class="page-title">Edit Room</div>

        <!-- ===== FORM (Spring Boot Binding) ===== -->
        <form
          th:action="@{'/room/update/' + ${roomId}}"
          th:object="${room}"
          method="post"
          enctype="multipart/form-data"
        >
          <!-- ===== EXISTING IMAGES ===== -->
          <div class="section">
            <label>Current Images</label>
            <div class="d-flex flex-wrap gap-3 mb-3">
              <div th:each="img : ${room.imagesList}" class="text-center">
                <img
                  th:src="@{'/uploads/rooms/' + ${room.roomId} + '/' + ${img.imageUrl}}"
                  alt="Room Image"
                  class="img-thumbnail"
                  style="width: 150px; height: 120px; object-fit: cover"
                />
              </div>
            </div>
            <div>
              <label>Add More Images</label>
              <input type="file" name="images" multiple accept="image/*" />
            </div>
          </div>

          <!-- ===== FORM INPUTS ===== -->
          <div class="section">
            <div class="formwrap">
              <div class="form-grid">
                <div class="form-group">
                  <label>Room Number</label>
                  <input
                    th:field="*{roomNumber}"
                    type="text"
                    placeholder="Enter room number"
                    required
                  />
                </div>

                <div class="form-group">
                  <label>Room Name</label>
                  <input
                    th:field="*{roomName}"
                    type="text"
                    placeholder="Enter room name"
                    required
                  />
                </div>

                <div class="form-group">
                  <label>Description</label>
                  <textarea
                    th:field="*{description}"
                    placeholder="Enter room description"
                  ></textarea>
                </div>

                <div class="form-group">
                  <label>Room Type</label>
                  <select th:field="*{roomType}" required>
                    <option value="" disabled>-- Select --</option>
                    <option value="Suite">Suite</option>
                    <option value="Executive">Executive</option>
                    <option value="Standard">Standard</option>
                  </select>
                </div>

                <div class="form-group">
                  <label>Beds</label>
                  <select th:field="*{numberOfBed}" required>
                    <option value="0" disabled>-- Select --</option>
                    <option value="1">1 Bed</option>
                    <option value="2">2 Beds</option>
                    <option value="3">3 Beds</option>
                  </select>
                </div>

                <div class="form-group">
                  <label>Type View</label>
                  <select th:field="*{viewType}" required>
                    <option value="" disabled>-- Select --</option>
                    <option value="Sea View">Sea View</option>
                    <option value="City View">City View</option>
                    <option value="Standard View">Standard View</option>
                  </select>
                </div>

                <div class="form-group">
                  <label>Capacity</label>
                  <input
                    th:field="*{capacity}"
                    type="number"
                    min="1"
                    required
                  />
                </div>

                <div class="form-group">
                  <label>Price per Night</label>
                  <div class="input-group" style="max-width: 290px">
                    <span class="input-group-text">$</span>
                    <input
                      th:field="*{price}"
                      type="number"
                      step="0.01"
                      min="0"
                      class="form-control"
                      placeholder="0.00"
                      required
                    />
                  </div>
                  <small class="text-muted">USD</small>
                </div>
              </div>

              <div>
                <label>Amenities</label><br />
                <div
                  th:each="amenity : ${allAmenities}"
                  class="form-check form-check-inline"
                >
                  <input
                    class="form-check-input"
                    type="checkbox"
                    name="amenities"
                    th:id="'amenity-' + ${amenity.amenityId}"
                    th:value="${amenity.amenityId}"
                    th:checked="${room.amenities.contains(amenity)}"
                  />
                  <label
                    class="form-check-label"
                    th:for="'amenity-' + ${amenity.amenityId}"
                    th:text="${amenity.name}"
                  ></label>
                </div>
              </div>

              <div class="actions mt-3">
                <button class="save-btn btn btn-primary" type="submit">
                  Update Room
                </button>
                <a th:href="@{/room/list}" class="cancel-btn btn btn-secondary">
                  Cancel
                </a>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </body>
</html>
